include $(DEVKITARM)/ds_rules
#---------------------------------------------------------------------------------
# path to tools
#---------------------------------------------------------------------------------
export PATH  :=    $(DEVKITARM)/bin:$(PATH)
export CC    :=    gcc
#---------------------------------------------------------------------------------
# the prefix on the compiler executables
#---------------------------------------------------------------------------------
PREFIX       :=    arm-none-eabi-
#---------------------------------------------------------------------------------


all: build/CWFE.sav
clean: 
	rm -rf build
	rm -f payload/payload.bin

########### (COMPILE EXPLOITABLE SAVE) ###########################################		
build/BuildSaveUSA.elf: BuildSaveUSA.s
	mkdir -p $(dir $@) 
	$(PREFIX)gcc -x assembler-with-cpp -nostartfiles -nostdlib -g -o $@ $< $(DEFINES)

build/CWFE.sav: build/BuildSaveUSA.elf
	arm-none-eabi-objcopy -O binary $< $@